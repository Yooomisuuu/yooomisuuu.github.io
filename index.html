<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yomi's World</title>
    <style>
        /* ÂÖ®Â±ÄÊ†∑Âºè - ÈÄÇÈÖçÁ≤âËâ≤ÂèØÁà±È£éÊ†º */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Comic Sans MS", "Arial Rounded MT Bold", sans-serif;
        }

        body {
            background-color: #ffe6f2;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><path fill="%23ffb3d9" fill-opacity="0.2" d="M30,10 Q50,0 70,10 Q90,20 90,40 Q90,60 70,70 Q50,80 30,70 Q10,60 10,40 Q10,20 30,10 Z"/></svg>');
            color: #5a2e48;
            overflow-x: hidden;
        }

        /* ‰æßËæπÂØºËà™Ê†è - Ê†∏ÂøÉÂ∏ÉÂ±ÄÂèòÊõ¥ */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            height: 100vh;
            width: 220px;
            background-color: #ff99cc;
            padding: 30px 15px;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
            z-index: 999;
        }

        .sidebar h2 {
            color: white;
            text-align: center;
            margin-bottom: 40px;
            font-size: 20px;
            text-shadow: 1px 1px 2px #ff66b3;
        }

        .sidebar-btn {
            display: block;
            width: 100%;
            padding: 12px 15px;
            margin: 10px 0;
            background-color: white;
            border: none;
            border-radius: 20px;
            color: #ff66b3;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .sidebar-btn:hover {
            background-color: #ff66b3;
            color: white;
            transform: translateX(5px);
        }

        /* ÁôªÂΩïÊåâÈíÆ - ÁßªÂà∞‰æßËæπÊ†èÈ°∂ÈÉ® */
        .login-section {
            text-align: center;
            margin-bottom: 20px;
        }

        .login-btn {
            padding: 10px 15px;
            background-color: #ff66b3;
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .login-btn:hover {
            background-color: #ff3399;
            transform: scale(1.05);
        }

        /* ‰∏ªÂÜÖÂÆπÂå∫Âüü */
        .main-content {
            margin-left: 220px;
            padding: 40px;
            min-height: 100vh;
        }

        /* È°µÈù¢Ê†áÈ¢òÊ†∑Âºè */
        .page-title {
            color: #ff66b3;
            font-size: 26px;
            margin-bottom: 30px;
            text-align: center;
            text-shadow: 1px 1px 3px #ffb3d9;
        }

        /* ÂÜÖÂÆπÁõíÂ≠êÊ†∑Âºè - ÈÄÇÈÖçÊñ∞È£éÊ†º */
        .content-section {
            background-color: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(255, 102, 179, 0.1);
            margin-bottom: 30px;
        }

        .section-title {
            color: #ff66b3;
            font-size: 20px;
            margin-bottom: 1rem;
            border-bottom: 2px solid #ffb3d9;
            padding-bottom: 0.5rem;
            text-shadow: 1px 1px 2px #ffd6e8;
        }

        /* ÊåâÈíÆÊ†∑ÂºèÁªü‰∏Ä */
        .upload-btn, .manage-btn, .add-target-btn, .create-folder-btn {
            margin: 1rem 0;
            padding: 10px 20px;
            background-color: #ff66b3;
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            display: none; /* ‰ªÖÁÆ°ÁêÜÂëòÂèØËßÅ */
        }

        .upload-btn:hover, .manage-btn:hover, .add-target-btn:hover, .create-folder-btn:hover {
            background-color: #ff3399;
            transform: scale(1.05);
        }

        /* Êñá‰ª∂/Êñá‰ª∂Â§πÁÆ°ÁêÜÊ†∑Âºè */
        .media-section {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .folder-item {
            border: 1px solid #ffd6e8;
            border-radius: 20px;
            padding: 1rem;
            text-align: center;
            cursor: pointer;
            transition: transform 0.2s;
            background-color: #fff8fc;
        }

        .folder-item:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(255, 102, 179, 0.1);
        }

        .folder-icon {
            width: 80px;
            height: 80px;
            object-fit: cover;
            margin-bottom: 0.5rem;
            border-radius: 10px;
        }

        .folder-name {
            margin-top: 0.5rem;
            font-weight: 500;
            color: #5a2e48;
        }

        /* ÂºπÁ™óÊ†∑Âºè - ÈÄÇÈÖçÁ≤âËâ≤È£éÊ†º */
        .login-modal, .folder-style-modal, .target-modal, .folder-modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 2rem;
            border-radius: 20px;
            box-shadow: 0 0 20px rgba(255, 102, 179, 0.3);
            z-index: 1000;
            width: 90%;
            max-width: 500px;
        }

        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 153, 204, 0.5);
            z-index: 999;
        }

        /* ÂºπÁ™óÂÜÖÊéß‰ª∂Ê†∑Âºè */
        .login-modal input, .folder-style-modal input, .target-modal input, .folder-modal input {
            margin: 0.5rem 0;
            padding: 10px 15px;
            width: 100%;
            border: 2px solid #ffb3d9;
            border-radius: 15px;
            outline: none;
            color: #5a2e48;
        }

        .style-btn {
            padding: 10px 15px;
            margin: 0 0.5rem;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .add-style {
            background-color: #ff66b3;
            color: white;
        }

        .remove-style {
            background-color: #ff9999;
            color: white;
        }

        .style-btn:hover {
            transform: scale(1.05);
        }

        .confirmFolderBtn, .saveTargetBtn, .confirmCreateFolderBtn {
            background-color: #ff66b3;
            color: white;
            border: none;
            border-radius: 15px;
            padding: 10px 20px;
            cursor: pointer;
            margin-right: 10px;
            transition: all 0.3s ease;
        }

        .cancelFolderBtn, .cancelTargetBtn, .cancelCreateFolderBtn {
            background-color: #ffb3d9;
            color: white;
            border: none;
            border-radius: 15px;
            padding: 10px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        /* ‰∏™‰∫∫ÁõÆÊ†áÊ†∑Âºè */
        .personal-target {
            position: relative;
        }

        .add-target-btn {
            position: absolute;
            top: 25px;
            right: 25px;
        }

        .target-item {
            display: flex;
            align-items: center;
            padding: 0.8rem;
            border: 1px solid #ffd6e8;
            border-radius: 15px;
            margin: 0.5rem 0;
            background-color: #fff8fc;
        }

        .target-checkbox {
            width: 20px;
            height: 20px;
            margin-right: 1rem;
            cursor: pointer;
            accent-color: #ff66b3;
        }

        .target-content {
            flex: 1;
        }

        .target-edit {
            color: #ff66b3;
            cursor: pointer;
            margin-left: 1rem;
            display: none; /* ‰ªÖÁÆ°ÁêÜÂëòÂèØËßÅ */
        }

        .completed {
            text-decoration: line-through;
            color: #b3889e;
        }

        /* Âà†Èô§ÊåâÈíÆÊ†∑Âºè */
        .delete-folder, .delete-file {
            margin-top: 0.5rem;
            background: #ff9999;
            color: white;
            border: none;
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            display: none; /* ‰ªÖÁÆ°ÁêÜÂëòÂèØËßÅ */
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .delete-folder:hover, .delete-file:hover {
            background: #ff6666;
        }

        /* ÂìçÂ∫îÂºèÈÄÇÈÖç */
        @media (max-width: 768px) {
            .sidebar {
                width: 180px;
            }
            .main-content {
                margin-left: 180px;
                padding: 20px;
            }
            .media-section {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
            .home-container {
                flex-direction: column;
                text-align: center;
            }
            .character-img {
                margin: 0 auto 2rem;
            }
        }

        
        /* È¶ñÈ°µÊ†∑Âºè */
        .home-page {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: center;
            gap: 50px;
            padding: 20px;
        }

        .profile-card {
            background-color: white;
            border-radius: 30px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(255, 102, 179, 0.2);
            max-width: 400px;
        }

        .profile-card h1 {
            color: #ff66b3;
            font-size: 28px;
            margin-bottom: 20px;
            text-align: center;
        }

        .profile-info {
            margin: 15px 0;
            line-height: 1.8;
        }

        .profile-info span {
            font-weight: bold;
            color: #ff66b3;
        }

        .cartoon-img {
            width: 300px;
            height: 300px;
            border-radius: 50%;
            object-fit: cover;
            border: 5px solid #ff99cc;
            box-shadow: 0 5px 15px rgba(255, 102, 179, 0.3);
        }

        /* Êñ∞Â¢ûÔºöÊñá‰ª∂Â§πÊ†∑ÂºèÂ∫ìÊ†∑ÂºèÔºàË°®ÊÉÖÂåÖÂºèÂ∏∏È©ªÂ±ïÁ§∫Ôºâ */
        .folder-style-library {
            margin: 1rem 0;
            padding: 1rem;
            border: 1px solid #ffd6e8;
            border-radius: 15px;
            background-color: #fff8fc;
        }

        .folder-style-library h4 {
            color: #ff66b3;
            margin-bottom: 0.8rem;
            text-align: center;
        }

        .style-preview {
            display: flex;
            gap: 1rem;
            margin: 1rem 0;
            flex-wrap: wrap;
            justify-content: center;
        }

        .style-option {
            position: relative;
        }

        .style-option.selected::after {
            content: "‚úì";
            position: absolute;
            bottom: 0;
            right: 0;
            background-color: #ff66b3;
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }

        /* Êñá‰ª∂Â§πÂÜÖÂÆπÊ†∑ÂºèÔºàÊî∂Á∫≥Êñá‰ª∂Ôºâ */
        .folder-content {
            display: none;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px dashed #ffb3d9;
        }

        .folder-opened .folder-content {
            display: block;
        }

        .file-item {
            display: flex;
            align-items: center;
            padding: 0.5rem;
            border: 1px solid #ffd6e8;
            border-radius: 10px;
            margin: 0.5rem 0;
            background-color: #fff;
        }

        .file-icon {
            width: 30px;
            height: 30px;
            margin-right: 0.5rem;
            border-radius: 5px;
        }

        .file-name {
            flex: 1;
            font-size: 14px;
        }

        /* Êñá‰ª∂ÊãñÊîæÊ†∑Âºè */
        .folder-item.drop-over {
            border: 2px dashed #ff66b3;
            background-color: #fff0f7;
        }
    </style>
</head>
<body>
    <!-- ‰æßËæπÂØºËà™Ê†è -->
    <div class="sidebar">
        <h2>Yomi's World</h2>
        
        <!-- ÁôªÂΩïÊåâÈíÆÂå∫Âüü - ÁßªÂà∞‰æßËæπÊ†è -->
        <div class="login-section">
            <button class="login-btn" id="loginBtn">Management Login</button>
        </div>

        <!-- ÂØºËà™ÊåâÈíÆ - Êñ∞Â¢ûÈ¶ñÈ°µÊåâÈíÆ -->
        <button class="sidebar-btn" onclick="navigateTo('home')">üè† Home</button>
        <button class="sidebar-btn" onclick="navigateTo('study')">üìö Study Diary</button>
        <button class="sidebar-btn" onclick="navigateTo('vlog')">üé• Daily Vlog</button>
        <button class="sidebar-btn" onclick="navigateTo('week')">üìñ Week Diary</button>
        <button class="sidebar-btn" onclick="navigateTo('achieve')">üèÜ Achievements</button>
        <button class="sidebar-btn" onclick="navigateTo('target')">üéØ Personal Target</button>
    </div>

    <!-- ÁôªÂΩïÂºπÁ™ó -->
    <div class="overlay" id="loginOverlay"></div>
    <div class="login-modal" id="loginModal">
        <h3 style="color: #ff66b3; text-align: center; margin-bottom: 1rem;">Management Login</h3>
        <input type="password" id="passwordInput" placeholder="Enter password">
        <button id="submitLogin" style="width: 100%; background: #ff66b3; color: white; border: none; border-radius: 15px; padding: 10px; cursor: pointer; margin-top: 1rem;">Login</button>
        <p id="loginError" style="color: #ff6666; margin-top: 0.5rem; display: none; text-align: center;">Wrong password!</p>
    </div>

    <!-- ‰∏ªÂÜÖÂÆπÂå∫Âüü -->
    <div class="main-content" id="main-content">
        <!-- È¶ñÈ°µ -->
        <div id="home" class="page-content">
            <div class="home-page">
                <img src="https://img.icons8.com/fluency/96/000000/cat.png" alt="Cute Cartoon" class="cartoon-img">
                <div class="profile-card">
                    <h1>About Me üíñ</h1>
                    <div class="profile-info">
                        <p><span>Name:</span> Yomi Qiu</p>
                        <p><span>Birthday:</span> 2010.03.25</p>
                        <p><span>MBTI:</span> INTJ</p>
                        <p><span>Hobbies:</span> Playing Tennis, Finding Dilicious Food, Mediating</p>
                        <p><span>Self-introduction:</span> Hello! I'm Yomi, born on March 25, 2010. As an INTJ, I'm a thoughtful and independent person who loves to explore the world around me. 
                                I enjoy reading, creating art, and documenting my daily life through diaries and vlogs. 
                                This little corner of the internet is where I share my study journey, daily life, and personal goals. 
                                Welcome to my world!</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Study Diary Âå∫Âüü -->
        <div id="study" class="page-content" style="display: none;">
            <h2 class="page-title">üìö Study Diary</h2>
            <section class="content-section">
                <h3 class="section-title">My Study Records</h3>
                <button class="upload-btn" id="studyUploadBtn">+ Upload File/Video</button>
                <button class="create-folder-btn" id="studyCreateFolderBtn">+ Create New Folder</button>
                <div class="media-section" id="studyMedia"></div>
            </section>
        </div>

        <!-- Daily Vlog Âå∫Âüü -->
        <div id="vlog" class="page-content" style="display: none;">
            <h2 class="page-title">üé• Daily Vlog</h2>
            <section class="content-section">
                <h3 class="section-title">My Daily Life</h3>
                <button class="upload-btn" id="vlogUploadBtn">+ Upload File/Video</button>
                <button class="create-folder-btn" id="vlogCreateFolderBtn">+ Create New Folder</button>
                <div class="media-section" id="vlogMedia"></div>
            </section>
        </div>

        <!-- Week Diary Âå∫Âüü -->
        <div id="week" class="page-content" style="display: none;">
            <h2 class="page-title">üìñ Week Diary</h2>
            <section class="content-section">
                <h3 class="section-title">Weekly Reflections</h3>
                <button class="upload-btn" id="weekUploadBtn">+ Upload File/Video</button>
                <button class="create-folder-btn" id="weekCreateFolderBtn">+ Create New Folder</button>
                <div class="media-section" id="weekMedia"></div>
            </section>
        </div>

        <!-- Achievements Showcase Âå∫Âüü -->
        <div id="achieve" class="page-content" style="display: none;">
            <h2 class="page-title">üèÜ Achievements Showcase</h2>
            <section class="content-section">
                <h3 class="section-title">My Accomplishments</h3>
                <button class="upload-btn" id="achieveUploadBtn">+ Upload File/Video</button>
                <button class="create-folder-btn" id="achieveCreateFolderBtn">+ Create New Folder</button>
                <div class="media-section" id="achieveMedia"></div>
            </section>
        </div>

        <!-- Personal Target Âå∫Âüü -->
        <div id="target" class="page-content" style="display: none;">
            <h2 class="page-title">üéØ Personal Target</h2>
            <section class="content-section personal-target">
                <h3 class="section-title">My Goals & Dreams</h3>
                <button class="add-target-btn" id="addTargetBtn">+ Add Target</button>
                <div class="target-list" id="targetList"></div>
            </section>
        </div>
    </div>

    <!-- Êñá‰ª∂Â§πÊ†∑ÂºèÂ∫ìÂºπÁ™óÔºàË°®ÊÉÖÂåÖÂºèÂ∏∏È©ªÂ±ïÁ§∫Ôºâ -->
    <div class="overlay" id="folderStyleOverlay"></div>
    <div class="folder-style-modal" id="folderStyleModal">
        <h3 style="color: #ff66b3; text-align: center; margin-bottom: 1rem;">Folder Style Library</h3>
        <div class="style-controls" style="display: flex; justify-content: center; margin: 1rem 0;">
            <button class="style-btn add-style" id="addStyleBtn">+ Add Folder Style</button>
            <button class="style-btn remove-style" id="removeStyleBtn">- Remove Selected</button>
        </div>
        <div class="style-preview" id="stylePreview"></div>
        <input type="file" id="styleImageUpload" accept="image/*" style="display: none;">
        <div style="display: flex; justify-content: center; gap: 10px; margin-top: 1rem;">
            <button id="cancelFolderBtn" class="cancelFolderBtn">Close</button>
        </div>
    </div>

    <!-- ÂàõÂª∫Êñá‰ª∂Â§πÂºπÁ™óÔºàÂåÖÂê´Â∏∏È©ªÂõæÊ°àÂ∫ìÔºâ -->
    <div class="overlay" id="createFolderOverlay"></div>
    <div class="folder-modal" id="createFolderModal">
        <h3 style="color: #ff66b3; text-align: center; margin-bottom: 1rem;">Create New Folder</h3>
        <input type="text" id="newFolderNameInput" placeholder="Enter folder name">
        
        <!-- Â∏∏È©ªÁöÑÊñá‰ª∂Â§πÂõæÊ°àÂ∫ìÔºàÂÉèÂæÆ‰ø°Ë°®ÊÉÖÂåÖ‰∏ÄÊ†∑Â±ïÁ§∫Ôºâ -->
        <div class="folder-style-library">
            <h4>üìÅ Select Folder Icon</h4>
            <div class="style-preview" id="createFolderStylePreview"></div>
        </div>
        
        <div style="display: flex; justify-content: center; gap: 10px; margin-top: 1rem;">
            <button id="confirmCreateFolderBtn" class="confirmCreateFolderBtn">Create</button>
            <button id="cancelCreateFolderBtn" class="cancelCreateFolderBtn">Cancel</button>
        </div>
    </div>

    <!-- ‰∏™‰∫∫ÁõÆÊ†áÂºπÁ™ó -->
    <div class="overlay" id="targetOverlay"></div>
    <div class="target-modal" id="targetModal">
        <h3 style="color: #ff66b3; text-align: center; margin-bottom: 1rem;">Add/Edit Target</h3>
        <div class="target-form">
            <input type="text" id="targetYear" placeholder="Enter year (e.g. 2024)">
            <input type="text" id="targetContent" placeholder="Enter target (e.g. Learn JavaScript)">
            <input type="hidden" id="targetId">
            <div style="display: flex; justify-content: center; gap: 10px; margin-top: 1rem;">
                <button id="saveTargetBtn" class="saveTargetBtn">Save</button>
                <button id="cancelTargetBtn" class="cancelTargetBtn">Cancel</button>
            </div>
        </div>
    </div>

    <script>
        // Ê†∏ÂøÉÂèòÈáè
        const ADMIN_PASSWORD = "Shining0325";
        let isAdmin = false;
        let currentMediaSection = "";
        // Êñá‰ª∂Â§πÊ†∑ÂºèÂ∫ì - Â∏∏È©ªÁöÑË°®ÊÉÖÂåÖÂºèÂõæÊ°àÂ∫ì
        let folderStyles = [
            { id: 1, src: "https://via.placeholder.com/60/ff66b3/ffffff?text=üìö" },
            { id: 2, src: "https://via.placeholder.com/60/ff99cc/ffffff?text=üé•" },
            { id: 3, src: "https://via.placeholder.com/60/ffb3d9/ffffff?text=üìñ" },
            { id: 4, src: "https://via.placeholder.com/60/ffd6e8/ffffff?text=üèÜ" },
            { id: 5, src: "https://via.placeholder.com/60/fff0f7/ffffff?text=üéØ" }
        ];
        let selectedStyleId = 1; // ÈªòËÆ§ÈÄâ‰∏≠Á¨¨‰∏Ä‰∏™Ê†∑Âºè
        let targets = [];
        let targetIdCounter = 1;
        // Â≠òÂÇ®Êñá‰ª∂Â§πÂíåÊñá‰ª∂ÁöÑÂÖ≥Á≥ª
        let folderFiles = {};

        // È°µÈù¢ÂØºËà™ÂäüËÉΩ
        function navigateTo(pageId) {
            // ÈöêËóèÊâÄÊúâÈ°µÈù¢
            const allPages = document.querySelectorAll('.page-content');
            allPages.forEach(page => {
                page.style.display = 'none';
            });
            // ÊòæÁ§∫ÁõÆÊ†áÈ°µÈù¢
            document.getElementById(pageId).style.display = 'block';
        }

        // DOM ÂÖÉÁ¥†
        const loginBtn = document.getElementById("loginBtn");
        const loginModal = document.getElementById("loginModal");
        const loginOverlay = document.getElementById("loginOverlay");
        const passwordInput = document.getElementById("passwordInput");
        const submitLogin = document.getElementById("submitLogin");
        const loginError = document.getElementById("loginError");
        
        // ÁÆ°ÁêÜÂëòÊåâÈíÆ
        const uploadBtns = document.querySelectorAll(".upload-btn");
        const createFolderBtns = document.querySelectorAll(".create-folder-btn");
        const addTargetBtn = document.getElementById("addTargetBtn");

        // Êñá‰ª∂Â§πÊ†∑ÂºèÂ∫ìÁõ∏ÂÖ≥
        const folderStyleModal = document.getElementById("folderStyleModal");
        const folderStyleOverlay = document.getElementById("folderStyleOverlay");
        const addStyleBtn = document.getElementById("addStyleBtn");
        const removeStyleBtn = document.getElementById("removeStyleBtn");
        const stylePreview = document.getElementById("stylePreview");
        const styleImageUpload = document.getElementById("styleImageUpload");
        const cancelFolderBtn = document.getElementById("cancelFolderBtn");

        // ÂàõÂª∫Êñá‰ª∂Â§πÁõ∏ÂÖ≥
        const createFolderModal = document.getElementById("createFolderModal");
        const createFolderOverlay = document.getElementById("createFolderOverlay");
        const newFolderNameInput = document.getElementById("newFolderNameInput");
        const createFolderStylePreview = document.getElementById("createFolderStylePreview");
        const confirmCreateFolderBtn = document.getElementById("confirmCreateFolderBtn");
        const cancelCreateFolderBtn = document.getElementById("cancelCreateFolderBtn");

        // ÁõÆÊ†áÁõ∏ÂÖ≥
        const targetModal = document.getElementById("targetModal");
        const targetOverlay = document.getElementById("targetOverlay");
        const targetYear = document.getElementById("targetYear");
        const targetContent = document.getElementById("targetContent");
        const targetId = document.getElementById("targetId");
        const saveTargetBtn = document.getElementById("saveTargetBtn");
        const cancelTargetBtn = document.getElementById("cancelTargetBtn");
        const targetList = document.getElementById("targetList");

        // ÁôªÂΩïÂäüËÉΩ
        loginBtn.addEventListener("click", () => {
            loginModal.style.display = "block";
            loginOverlay.style.display = "block";
            passwordInput.focus();
        });

        loginOverlay.addEventListener("click", () => {
            loginModal.style.display = "none";
            loginOverlay.style.display = "none";
            loginError.style.display = "none";
        });

        submitLogin.addEventListener("click", () => {
            if (passwordInput.value === ADMIN_PASSWORD) {
                isAdmin = true;
                loginModal.style.display = "none";
                loginOverlay.style.display = "none";
                // ÊòæÁ§∫ÊâÄÊúâÁÆ°ÁêÜÂëòÊåâÈíÆ
                uploadBtns.forEach(btn => btn.style.display = "inline-block");
                createFolderBtns.forEach(btn => btn.style.display = "inline-block");
                addTargetBtn.style.display = "inline-block";
                alert("‚ú® Edit mode begin! You can now upload files and manage content.");
            } else {
                loginError.style.display = "block";
                passwordInput.value = "";
            }
        });

        // Ê∏≤ÊüìÊñá‰ª∂Â§πÊ†∑ÂºèÂ∫ìÔºàË°®ÊÉÖÂåÖÂºèÂ±ïÁ§∫Ôºâ
        function renderFolderStyles(previewContainer, selectedId = selectedStyleId) {
            if (!previewContainer) return;
            
            previewContainer.innerHTML = "";
            folderStyles.forEach(style => {
                const styleItem = document.createElement("div");
                styleItem.className = `style-option ${selectedId === style.id ? "selected" : ""}`;
                styleItem.dataset.id = style.id;
                styleItem.style.width = "60px";
                styleItem.style.height = "60px";
                styleItem.style.border = selectedId === style.id ? "2px solid #ff66b3" : "2px solid transparent";
                styleItem.style.borderRadius = "10px";
                styleItem.style.cursor = "pointer";
                styleItem.innerHTML = `<img src="${style.src}" width="60" height="60" alt="Folder Style" style="border-radius: 8px;">`;
                styleItem.addEventListener("click", () => {
                    if (previewContainer === createFolderStylePreview) {
                        selectedStyleId = style.id;
                        renderFolderStyles(createFolderStylePreview, style.id);
                    } else {
                        selectedStyleId = style.id;
                        renderFolderStyles(stylePreview, style.id);
                    }
                });
                previewContainer.appendChild(styleItem);
            });
        }

        // Ê∑ªÂä†Êñ∞ÁöÑÊñá‰ª∂Â§πÊ†∑ÂºèÂà∞Ê†∑ÂºèÂ∫ì
        addStyleBtn.addEventListener("click", () => {
            styleImageUpload.click();
        });

        styleImageUpload.addEventListener("change", (e) => {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (event) => {
                    const newStyleId = folderStyles.length > 0 ? Math.max(...folderStyles.map(s => s.id)) + 1 : 1;
                    folderStyles.push({
                        id: newStyleId,
                        src: event.target.result
                    });
                    renderFolderStyles(stylePreview);
                    renderFolderStyles(createFolderStylePreview);
                };
                reader.readAsDataURL(file);
            }
        });

        // ‰ªéÊ†∑ÂºèÂ∫ìÂà†Èô§ÈÄâ‰∏≠ÁöÑÊ†∑Âºè
        removeStyleBtn.addEventListener("click", () => {
            if (selectedStyleId && folderStyles.length > 1) {
                folderStyles = folderStyles.filter(style => style.id !== selectedStyleId);
                selectedStyleId = folderStyles[0]?.id || null;
                renderFolderStyles(stylePreview);
                renderFolderStyles(createFolderStylePreview);
            } else if (folderStyles.length <= 1) {
                alert("Cannot remove the last style!");
            } else {
                alert("Please select a style to remove!");
            }
        });

        // ÊâìÂºÄÊñá‰ª∂Â§πÊ†∑ÂºèÂ∫ìÂºπÁ™ó
        function openFolderStyleModal() {
            folderStyleModal.style.display = "block";
            folderStyleOverlay.style.display = "block";
            renderFolderStyles(stylePreview);
        }

        // ÊâìÂºÄÂàõÂª∫Êñá‰ª∂Â§πÂºπÁ™ó
        function openCreateFolderModal(section) {
            currentMediaSection = section;
            createFolderModal.style.display = "block";
            createFolderOverlay.style.display = "block";
            newFolderNameInput.value = "";
            selectedStyleId = folderStyles[0]?.id || 1;
            renderFolderStyles(createFolderStylePreview);
        }

        // ÂÖ≥Èó≠Êñá‰ª∂Â§πÊ†∑ÂºèÂ∫ìÂºπÁ™ó
        cancelFolderBtn.addEventListener("click", () => {
            folderStyleModal.style.display = "none";
            folderStyleOverlay.style.display = "none";
        });

        folderStyleOverlay.addEventListener("click", () => {
            folderStyleModal.style.display = "none";
            folderStyleOverlay.style.display = "none";
        });

        // ÂÖ≥Èó≠ÂàõÂª∫Êñá‰ª∂Â§πÂºπÁ™ó
        cancelCreateFolderBtn.addEventListener("click", () => {
            createFolderModal.style.display = "none";
            createFolderOverlay.style.display = "none";
        });

        createFolderOverlay.addEventListener("click", () => {
            createFolderModal.style.display = "none";
            createFolderOverlay.style.display = "none";
        });

        // ÂàõÂª∫Êñá‰ª∂Â§πÔºàÂ∏¶ÈÄâ‰∏≠ÁöÑÂõæÊ°àÔºâ
        confirmCreateFolderBtn.addEventListener("click", () => {
            if (!newFolderNameInput.value.trim()) {
                alert("Please enter folder name!");
                return;
            }

            const selectedStyle = folderStyles.find(style => style.id === selectedStyleId);
            if (!selectedStyle) {
                alert("Please select a folder style!");
                return;
            }

            const mediaSection = document.getElementById(`${currentMediaSection}Media`);
            const folderId = `folder_${Date.now()}`;
            
            // ÂàõÂª∫Êñá‰ª∂Â§πÂÖÉÁ¥†
            const folderItem = document.createElement("div");
            folderItem.className = "folder-item";
            folderItem.dataset.id = folderId;
            folderItem.innerHTML = `
                <img src="${selectedStyle.src}" class="folder-icon" alt="Folder Icon">
                <div class="folder-name" contenteditable="true">${newFolderNameInput.value}</div>
                <button class="delete-folder" style="display: ${isAdmin ? "block" : "none"}">Delete</button>
                <!-- Êñá‰ª∂Â§πÂÜÖÂÆπÂå∫ÂüüÔºàÊî∂Á∫≥Êñá‰ª∂Ôºâ -->
                <div class="folder-content" id="folder_${folderId}_content"></div>
            `;

            // Êñá‰ª∂Â§πÁÇπÂáªÂ±ïÂºÄ/Êî∂Ëµ∑
            folderItem.addEventListener("click", (e) => {
                // ÊéíÈô§Âà†Èô§ÊåâÈíÆÂíåÁºñËæëÂêçÁß∞ÁöÑÁÇπÂáª
                if (!e.target.classList.contains('delete-folder') && e.target.tagName !== 'DIV') {
                    folderItem.classList.toggle('folder-opened');
                }
            });

            // Âà†Èô§Êñá‰ª∂Â§π
            folderItem.querySelector(".delete-folder").addEventListener("click", (e) => {
                e.stopPropagation();
                if (confirm("Are you sure to delete this folder?")) {
                    mediaSection.removeChild(folderItem);
                    delete folderFiles[folderId];
                }
            });

            // ÊãñÊîæÊñá‰ª∂Âà∞Êñá‰ª∂Â§πÂäüËÉΩ
            folderItem.addEventListener("dragover", (e) => {
                e.preventDefault();
                folderItem.classList.add('drop-over');
            });

            folderItem.addEventListener("dragleave", () => {
                folderItem.classList.remove('drop-over');
            });

            folderItem.addEventListener("drop", (e) => {
                e.preventDefault();
                folderItem.classList.remove('drop-over');
                const fileId = e.dataTransfer.getData("text/plain");
                const fileItem = document.getElementById(fileId);
                if (fileItem) {
                    // ÊääÊñá‰ª∂ÁßªÂä®Âà∞Êñá‰ª∂Â§πÂÜÖ
                    folderItem.querySelector(".folder-content").appendChild(fileItem);
                    // ËÆ∞ÂΩïÊñá‰ª∂ÊâÄÂ±ûÊñá‰ª∂Â§π
                    folderFiles[fileId] = folderId;
                }
            });

            mediaSection.appendChild(folderItem);
            createFolderModal.style.display = "none";
            createFolderOverlay.style.display = "none";
        });

        // ÁªëÂÆöÂàõÂª∫Êñá‰ª∂Â§πÊåâÈíÆ
        document.getElementById("studyCreateFolderBtn").addEventListener("click", () => openCreateFolderModal("study"));
        document.getElementById("vlogCreateFolderBtn").addEventListener("click", () => openCreateFolderModal("vlog"));
        document.getElementById("weekCreateFolderBtn").addEventListener("click", () => openCreateFolderModal("week"));
        document.getElementById("achieveCreateFolderBtn").addEventListener("click", () => openCreateFolderModal("achieve"));

        // ‰∏ä‰º†Êñá‰ª∂ÂäüËÉΩÔºàÊîØÊåÅÊãñÊîæÂà∞Êñá‰ª∂Â§πÔºâ
        function handleFileUpload(btnId, sectionId) {
            const btn = document.getElementById(btnId);
            const fileInput = document.createElement("input");
            fileInput.type = "file";
            fileInput.accept = "*";
            fileInput.multiple = true;

            btn.addEventListener("click", () => {
                fileInput.click();
            });

            fileInput.addEventListener("change", (e) => {
                const files = e.target.files;
                const mediaSection = document.getElementById(sectionId);
                
                for (let file of files) {
                    const fileId = `file_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
                    const fileItem = document.createElement("div");
                    fileItem.className = "file-item";
                    fileItem.id = fileId;
                    fileItem.draggable = true; // ÂÖÅËÆ∏ÊãñÊãΩ
                    const fileUrl = URL.createObjectURL(file);
                    
                    // Âà§Êñ≠Êñá‰ª∂Á±ªÂûã
                    let filePreview = "";
                    if (file.type.startsWith("image/")) {
                        filePreview = `<img src="${fileUrl}" class="file-icon" alt="${file.name}">`;
                    } else if (file.type.startsWith("video/")) {
                        filePreview = `<video src="${fileUrl}" class="file-icon" controls></video>`;
                    } else {
                        filePreview = `<div class="file-icon" style="background: #ffd6e8; display: flex; align-items: center; justify-content: center; font-size: 12px; color: #ff66b3;">File</div>`;
                    }

                    fileItem.innerHTML = `
                        ${filePreview}
                        <div class="file-name" contenteditable="true">${file.name}</div>
                        <button class="delete-file" style="display: ${isAdmin ? "block" : "none"}">Delete</button>
                    `;

                    // Êñá‰ª∂ÊãñÊãΩ‰∫ã‰ª∂
                    fileItem.addEventListener("dragstart", (e) => {
                        e.dataTransfer.setData("text/plain", fileId);
                    });

                    // Âà†Èô§Êñá‰ª∂
                    fileItem.querySelector(".delete-file").addEventListener("click", () => {
                        if (confirm("Are you sure to delete this file?")) {
                            fileItem.remove();
                            URL.revokeObjectURL(fileUrl);
                            delete folderFiles[fileId];
                        }
                    });

                    // ÈªòËÆ§Ê∑ªÂä†Âà∞Â™í‰ΩìÂå∫ÂüüÊ†πÁõÆÂΩï
                    mediaSection.appendChild(fileItem);
                }
            });
        }

        // ÁªëÂÆö‰∏ä‰º†ÊåâÈíÆ
        handleFileUpload("studyUploadBtn", "studyMedia");
        handleFileUpload("vlogUploadBtn", "vlogMedia");
        handleFileUpload("weekUploadBtn", "weekMedia");
        handleFileUpload("achieveUploadBtn", "achieveMedia");

        // ‰∏™‰∫∫ÁõÆÊ†áÂäüËÉΩ
        function renderTargets() {
            targetList.innerHTML = "";
            targets.forEach(target => {
                const targetItem = document.createElement("div");
                targetItem.className = `target-item ${target.completed ? "completed" : ""}`;
                targetItem.innerHTML = `
                    <input type="checkbox" class="target-checkbox" ${target.completed ? "checked" : ""} data-id="${target.id}">
                    <div class="target-content">
                        <strong>${target.year}</strong>: ${target.content}
                    </div>
                    <span class="target-edit" data-id="${target.id}" style="${isAdmin ? "display: inline" : "none"}">‚úèÔ∏è Edit</span>
                `;

                // ÂãæÈÄâ/ÂèñÊ∂àÂãæÈÄâ
                targetItem.querySelector(".target-checkbox").addEventListener("change", (e) => {
                    const id = parseInt(e.target.dataset.id);
                    const target = targets.find(t => t.id === id);
                    if (target) {
                        target.completed = e.target.checked;
                        renderTargets();
                    }
                });

                // ÁºñËæëÁõÆÊ†á
                targetItem.querySelector(".target-edit").addEventListener("click", (e) => {
                    const id = parseInt(e.target.dataset.id);
                    const target = targets.find(t => t.id === id);
                    if (target) {
                        targetId.value = target.id;
                        targetYear.value = target.year;
                        targetContent.value = target.content;
                        targetModal.style.display = "block";
                        targetOverlay.style.display = "block";
                    }
                });

                targetList.appendChild(targetItem);
            });
        }

        // ÊâìÂºÄÊ∑ªÂä†ÁõÆÊ†áÂºπÁ™ó
        addTargetBtn.addEventListener("click", () => {
            targetId.value = "";
            targetYear.value = "";
            targetContent.value = "";
            targetModal.style.display = "block";
            targetOverlay.style.display = "block";
        });

        // ÂÖ≥Èó≠ÁõÆÊ†áÂºπÁ™ó
        cancelTargetBtn.addEventListener("click", () => {
            targetModal.style.display = "none";
            targetOverlay.style.display = "none";
        });

        targetOverlay.addEventListener("click", () => {
            targetModal.style.display = "none";
            targetOverlay.style.display = "none";
        });

        // ‰øùÂ≠òÁõÆÊ†á
        saveTargetBtn.addEventListener("click", () => {
            if (!targetYear.value || !targetContent.value) {
                alert("Please enter year and target content!");
                return;
            }

            if (targetId.value) {
                // ÁºñËæëÁé∞ÊúâÁõÆÊ†á
                const id = parseInt(targetId.value);
                const target = targets.find(t => t.id === id);
                if (target) {
                    target.year = targetYear.value;
                    target.content = targetContent.value;
                }
            } else {
                // Ê∑ªÂä†Êñ∞ÁõÆÊ†á
                targets.push({
                    id: targetIdCounter++,
                    year: targetYear.value,
                    content: targetContent.value,
                    completed: false
                });
            }

            renderTargets();
            targetModal.style.display = "none";
            targetOverlay.style.display = "none";
        });

        // ÂàùÂßãÂåñ
        renderFolderStyles(stylePreview);
        renderFolderStyles(createFolderStylePreview);
        renderTargets();
        
        // È°µÈù¢Âä†ËΩΩÊó∂ÈªòËÆ§ÊòæÁ§∫È¶ñÈ°µ
        window.onload = function() {
            navigateTo('home');
        };

        // Á°Æ‰øùÁÆ°ÁêÜÂëòÁôªÂΩïÂèñÊ∂àÂêéÈöêËóèÊåâÈíÆ
        window.addEventListener("beforeunload", () => {
            isAdmin = false;
        });
    </script>
</body>
</html>
